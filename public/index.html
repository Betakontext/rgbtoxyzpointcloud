<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <!-- Viewport‑Tag, das in VR‑Browsern zuverlässig funktioniert -->
  <meta name="viewport"
        content="width=device-width,initial-scale=1,
                 user-scalable=no,
                 maximum-scale=1,
                 minimum-scale=1">
  <title>RGB to XYZ pointcloud VR</title>

  <link rel="stylesheet" href="styles.css">

  <!-- A‑Frame (inkl. Extras) -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>

  <!-- LZString (Backup‑Kompression) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
</head>

<body>
  <!-- A‑Frame‑Scene (einzige Szene) -->
  <a-scene id="pointcloud-container"
           background="color:#000"

           renderer="antialias:true;precision:mediump"
           vr-mode-ui="enabled: true"
           webxr="requiredFeatures: local-floor;
                  optionalFeatures: bounded-floor,hand-tracking">
      <a-entity id="camera-rig" movement-controls="speed:0.3">
      <a-camera id="main-camera"
                position="0 1.6 0"
                look-controls></a-camera>
      <a-entity laser-controls="hand:left"></a-entity>
      <a-entity laser-controls="hand:right"></a-entity>
    </a-entity>

  </a-scene>

  <div id="loading" style="display:none;">Processing…</div>
  <div id="message"></div>

  <!-- Upload‑Button (Datei‑Auswahl) -->
  <div id="upload-wrapper">
    <input id="fileInput"
           type="file"
           accept="image/*,.avif,.heif,.tiff,.tif"
           style="display:none;">
    <label for="fileInput" class="">Upload image</label>
  </div>

  <!-- Beispiel-Auswahl unten links (nutzt vorhandenes Overlay-Pattern) -->
  <div id="sample-thumbs" style="position:fixed; left:10px; bottom:10px; z-index:10000;">
    <div class="button-row" style="display:flex; gap:4px;">
      <img class="sample-thumb" src="img/Korallen.webp" data-image="img/Korallen.webp" alt="Corals" title="Corals" style="width:56px; height:56px; object-fit:cover; border-radius:4px; cursor:pointer;">
      <img class="sample-thumb" src="img/Earth.webp"   data-image="img/Earth.webp"   alt="Earth"  title="Earth"  style="width:56px; height:56px; object-fit:cover; border-radius:4px; cursor:pointer;">
      <img class="sample-thumb" src="img/Berg.webp"    data-image="img/Berg.webp"    alt="Mountains" title="Mountains" style="width:56px; height:56px; object-fit:cover; border-radius:4px; cursor:pointer;">
    </div>
  </div>


  <script src="upload.js"></script>
  <script src="script.js"></script>

</body>
</html>
